\section{Motivation}

The ProB standalone application written in Tcl/Tk uses Dotty as library to create visualizations of certain data structures within the ProB application. Unfortunately, these data visualizations are completely missing in both the Java APIs. The intention of this work is to inspect the data visualizations that are available in the Tcl/Tk application and recreate these in the Java 2.0 API. The visualizations should not be hard coded, but should use D3 and the existing webserver structure to create a framework so that similar visualizations can be created in the future using the same principles.

Central to the ProB application is the concept of the state space. The state space is a directed multigraph. The states are saved as vertices in the graph and the operations within the graph are saved as directed edges that transition from one state to another. The main purpose of the ProB software is to verify this state space for inconsistencies. For instance, it is possible to use ProB to find states within the graph that violate the invariant for specification. It is also possible to find states from which there are no further operations possible. This is called a deadlock.

The ProB 2.0 API extracts the information about the existing state space from the ProB CLI and saves it in a programmatic abstraction of the state space. This abstraction saves the information about the different states in a graph data structure using the Java JUNG graph library. The state space object already supports the use of Dijkstra's algorithm to find the shortest trace from the root state to a user defined state. This can be used to find traces that show how an invariant violation or deadlock can be found. What is missing, however, is a visualization of the actual state space itself.

Because the state space is a directed multigraph, this visualization problem is not trivial. It was necessary to find a graph library that would be able to draw a complicated graph. Because the state space varies drastically depending on the machine that is being animated, it was also necessary that the graph library be able to handle graphs of all different shapes and sizes.

A useful feature for the visualization of a state space would also be the ability of the user to manipulate the graph. For instance, the Tcl/Tk version of ProB supports the capability for the user to specify a formula and to merge all states for which the formula evaluates to the same result. Similar functionality was desired for the visualization in the ProB 2.0 API. A useful visualization would also allow the user to specify how the graph should be colored.

Although the visualization of the state space was the focus of this work, there were other sets of data for which a visualization would be useful. The ProB Tcl/Tk version supports a useful visualization of B formulas. The user specified formula is broken down into subformulas and colored so as to specify the value of the formula (e.g. if a given predicate evaluates to true at the specified state, the predicate would be colored green). A similar visualization exists in the ProB 1.3.6 API but not in the ProB 2.0 API.

Another useful visualization that falls into the scope of this work was a visualization of the value of a user defined formula over time. No such visualization exists in any of the ProB applications yet, but it was thought that such a visualization would be relatively simple to generate and useful.